<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>反射和折射</title>
	<link rel="stylesheet" type="text/css" href="css/index.css">
</head>
<body>
	<h1><a href="index.html" title=""><img src="asset/logo.png" alt=""></a>反射和折射</h1>
	<div class="navigator">
		<ol class="custom-counter">
			<li><a href="1.html" title="">图像的生成和投影</a></li>
			<li><a href="2.html" title="">光和颜色</a></li>
			<li><a href="3.html" title="">前向追踪</a></li>
			<li><a href="4.html" title="">后向追踪</a></li>
			<li><a href="5.html" title=""><b style="color: black;">反射和折射</b></a></li>
			<li><a href="6.html" title="">算法实现</a></li>
			<li><a href="7.html" title="">结果</a></li>
			<li><a href="8.html" title="">相关进展</a></li>
			<li><a href="9.html" title="">视频</a></li>
		</ol>
	</div>
	<div class="wrapper">
		<img src="asset/reflectionrefraction.gif" alt="">
		<p>
			使用光线追踪的另外一个好处就是可以很容易地模拟反射和折射。反射光方向可以通过入射光线和平面的法向量来确定。而折射方向则可以通过入射光线和平面的法向量，还有介质的折射率来确定。反射和折射对最终我们看到的光的强度的贡献比例可以通过菲涅耳方程来确定。
		</p>
		<div>
			<h2>伪代码：</h2>
			<div class="code-block">
				<div class="line-no-block">
					1
					<br/>
					2
					<br/>
					3
					<br/>
					4
					<br/>
					5
					<br/>
					6
					<br/>
					7
					<br/>
					8
					<br/>
					9
				</div>
				<div>
					<code>
						// compute reflection color
						<br/>
						<b>color</b> reflectionCol = computeReflectionColor(); 
						<br/>
						// compute refraction color
						<br/>
						<b>color</b> refractionCol = computeRefractionColor(); 
						<br/>
						<b>float</b> Kr; // reflection mix value 
						<br/>
						<b>float</b> Kt; // refraction mix value 
						<br/>
						fresnel(refractiveIndex, normalHit, primaryRayDirection, &Kr, &Kt); 
						<br/>
						// mix the two
						<br/>
						<b>color</b> glassBallColorAtHit = Kr * reflectionColor + (1-Kr) * refractionColor; 
					</code>
				</div>
			</div>
		</div>
		<p>
			最后，反射和折射在自然界是一个不断持续的过程，也暗示着我们可以通过递归来实现这样的算法，但是要注意的是我们不可能无穷递归下取，一般我们在效率和效果之前取得一个平衡点。
		</p>
		<div class="bottom-jump">
			<a class="pred" href="4.html" title="">上一页</a>
			<a class="contents" href="contents.html" title="">目录</a>
			<a class="next" href="6.html" title="">下一页</a>
		</div>
	</div>
</body>
</html>